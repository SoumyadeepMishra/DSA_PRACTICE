## K Radius Subarray Averages

```cpp

class Solution {
public:

    typedef long long ll;

    vector<int> getAverages(vector<int>& nums, int k) {
        int n = nums.size();
        // handling edge cases 
        if(k == 0) return nums;
        vector<int> result(n, -1);
        if(2*k+1 > n) return result;

        // prefix sum
        vector<ll> prefix_sum(n);
        prefix_sum[0] = nums[0];
        for(int i=1;i<n;i++){
            prefix_sum[i] = prefix_sum[i-1] + nums[i];
        }

        // applying conditon 
        for(int i=k;i<=n-k-1;i++){
            int left_idx = i-k;
            int right_idx = i+k;
            ll sum = prefix_sum[right_idx];
            if(left_idx > 0){
                sum -= prefix_sum[left_idx-1];
            }
            result[i] = sum/(2*k+1);
        }
        return result;
    }
};

```