# Count nodes equal to avarage of subtree 

code

```cpp

class Solution {
public:
    int result;

    pair<int, int> solve(TreeNode* root){
        if(root == nullptr) return {0, 0}; // {sum, count} is returning as a pair

        // starting from the bottom of the tree
        auto p1 = solve(root->left);
        auto p2 = solve(root->right);

        int totalSum = p1.first + p2.first + root->val;
        int totalCount = p1.second + p2.second + 1;

        int avg = totalSum / totalCount;
        if(avg == root->val){
            result ++;
        }

        return {totalSum, totalCount};
    }

    int averageOfSubtree(TreeNode* root) {
        result = 0;

        solve(root);
        return result;

    }
};

```